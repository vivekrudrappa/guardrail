<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
  <!-- Mermaid.js library call -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/9.4.3/mermaid.min.js"></script>
  <title>Astra AI Guardrail Accelerator </title>
  
  <style>
    h2 {
        color: #232f3e;
        border-bottom: 3px solid #ff9900;
        padding-bottom: 10px;
        margin-top: 40px;
    }
    /* new added styles */
    .subtitle {
        text-align: center;
        margin-bottom: 40px;
        font-style: italic;
    }
    .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }
    
    .card {
        border: 1px solid #e1e8ed;
        border-radius: 8px;
        padding: 20px;
        background: #fff;
        transition: all 0.3s ease;
        position: relative;
    }
    
    .card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        border-color: #ff9900;
    }
    
    .card h3 {
        color: #232f3e;
        margin: 0 0 12px 0;
        font-size: 1.1em;
        display: flex;
        align-items: center;
        gap: 10px;
    }
    
    .card p {
        color: #555;
        margin: 0 0 10px 0;
        font-size: 0.95em;
    }
    
    .card .actions {
        font-size: 0.85em;
        color: #666;
        font-weight: 500;
    }
    
    .badge {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 0.7em;
        font-weight: bold;
        text-transform: uppercase;
        margin-left: auto;
    }
    
    .badge.content-filter { background: #e3f2fd; color: #1976d2; }
    .badge.pii { background: #f3e5f5; color: #7b1fa2; }
    .badge.custom { background: #e8f5e8; color: #388e3c; }
    .badge.prompt { background: #fff3e0; color: #f57c00; }
    .badge.contextual { background: #fce4ec; color: #c2185b; }
    
    .icon {
        width: 20px;
        height: 20px;
        border-radius: 50%;
        display: inline-block;
    }
    
    .icon.hate { background: #ffebee; border: 2px solid #f44336; }
    .icon.violence { background: #fff3e0; border: 2px solid #ff9800; }
    .icon.sexual { background: #fce4ec; border: 2px solid #e91e63; }
    .icon.misconduct { background: #f3e5f5; border: 2px solid #9c27b0; }
    .icon.pii { background: #e3f2fd; border: 2px solid #2196f3; }
    .icon.custom { background: #e8f5e8; border: 2px solid #4caf50; }
    .icon.prompt { background: #fff8e1; border: 2px solid #ffc107; }
    .icon.contextual { background: #e0f2f1; border: 2px solid #009688; }
    
    .note {
        background: #f0f8ff;
        border-left: 4px solid #2196f3;
        padding: 15px;
        margin: 20px 0;
        border-radius: 4px;
    }
    
    .strength-indicator {
        font-size: 0.8em;
        margin-top: 8px;
        padding: 4px 8px;
        background: #f5f5f5;
        border-radius: 4px;
        display: inline-block;
    }
    /* new added styles end */
    body {
      font-family: "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: #f8f9fa;
      color: #333;
      line-height: 1.6;
    }
    header {
      background: linear-gradient(135deg, #2c3e50, #4ca1af);
      color: white;
      padding: 30px 20px;
      text-align: center;
    }
    header h1 {
      margin: 0;
      font-size: 2rem;
    }
    header p {
      font-size: 1.1rem;
      margin-top: 10px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    main {
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    section {
      margin-bottom: 30px;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    section h2 {
      color: #2c3e50;
      margin-bottom: 10px;
    }

    label {
      font-weight: bold;
      margin-top: 15px;
      display: block;
    }
    select, button {
      margin: 8px 0;
      padding: 12px;
      width: 100%;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }
    textarea {
      background: #f8f9fa;
      margin: 10px 0;
      padding: 12px;
      width: 100%;
      max-width: 800px;
      height: 120px;
      font-size: 14px;
      resize: vertical; /* allows user to expand */
    }
    button {
      background-color: #4ca1af;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #357f8a;
    }
    #result {
      margin-top: 15px;
      padding: 15px;
      border-radius: 10px;
      background: #f4f6f7;
      border: 1px solid #ddd;
      min-height: 120px;
      white-space: pre-wrap;
      font-size: 0.95rem;
      overflow-x: auto;
    }
    footer {
      text-align: center;
      padding: 20px;
      font-size: 0.9rem;
      color: #555;
      background: #f1f1f1;
      margin-top: 40px;
    }
    .config-panel {
      margin-top: 20px;
      padding: 15px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .config-panel label {
      display: block;
      margin: 8px 0;
    }
    pre {
      background: #f8f9fa;
      padding: 1rem;
      border-radius: 0.5rem;
      max-height: 300px;
      overflow: auto;
    }

    #chatButton {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: #4ca1af;
      color: white;
      padding: 15px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.2);
      z-index: 1000;
      transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.2s ease;
    }
    
    #chatButton:hover {
      background-color: #357f8a;
      transform: translateY(-4px); /* lifts button upward */
      box-shadow: 0 8px 12px rgba(0,0,0,0.3); /* stronger shadow */
    }
  
    /* Chat Popup */
    #chatPopup {
      display: none;
      position: fixed;
      bottom: 80px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.3);
      display: None;
      flex-direction: column;
      overflow: hidden;
      z-index: 1000;
      font-family: Arial, sans-serif;
    }
  
    .chat-header {
      background: #4ca1af;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-between;
      font-weight: bold;
    }
    .chat-header button {
      background: #4ca1af;       /* give it a background */
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: white;
      width: 40px;               /* fixed width */
      height: 40px;              /* fixed height */
      border-radius: 50%;        /* make it circular */
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;            /* prevent shrinking */
    }
    .chat-header button:hover {
      background-color: #357f8a;
    }
  
    .chat-body {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background: #f9f9f9;
    }
    /*
    .chat-input {
      display: flex;
      border-top: 1px solid #ddd;
    }
    */
    .chat-input input {
      flex: 1;
      height: 20px;
      padding: 10px;
      border: none;
      outline: none;
    }
  
    .chat-input button {
      background: #4ca1af;       /* give it a background */
      border: none;
      font-size: 16px;
      cursor: pointer;
      color: white;
      width: 40px;               /* fixed width */
      height: 40px;              /* fixed height */
      border-radius: 50%;        /* make it circular */
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;            /* prevent shrinking */
    }
    .chat-input button:hover {
      background-color: #357f8a;
    }
  
    .message {
      margin: 8px 0;
      padding: 8px 12px;
      border-radius: 18px;
      max-width: 75%;
      line-height: 1.4;
      clear: both;
    }
  
    .user-message {
      background: #DCF8C6;
      float: right;
      text-align: right;
    }
  
    .bot-message {
      background: #eee;
      float: left;
      text-align: left;
    }
    .chat-input {
      display: flex;
      align-items: flex-end;
      gap: 8px;
      padding: 10px;
      border-top: 1px solid #ddd;
      background: #f9f9f9;
    }
    
    .chat-input textarea {
      flex: 1;
      min-height: 40px;   /* 2 lines */
      max-height: 120px;  /* won‚Äôt grow too big */
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 15px;
      resize: none;       /* prevent manual resize */
      line-height: 1.4;
      font-size: 14px;
      overflow-y: auto;
    }
    /*
    .chat-input button {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      color: #007bff;
    }
    */
    /* Chat modal old styling end */

    /* dashboard styles */
    .dashboard-container {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      padding: 20px;
      margin: 20px 0;
    }
    
    .dashboard-header {
      background: linear-gradient(135deg, #2c3e50, #4ca1af);
      color: white;
      padding: 15px 20px;
      border-radius: 8px 8px 0 0;
      margin: -20px -20px 20px -20px;
    }
    
    .dashboard-iframe {
      width: 100%;
      height: 800px;
      border: 1px solid #e1e8ed;
      border-radius: 8px;
      background: #f8f9fa;
    }
    
    .loading-spinner {
      text-align: center;
      padding: 50px;
      color: #666;
    }
    
    .dashboard-controls {
      margin-bottom: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e1e8ed;
    }
    
    .refresh-btn {
      background-color: #4ca1af;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    
    .refresh-btn:hover {
      background-color: #357f8a;
    }
    
    .fullscreen-btn {
      background-color: #2c3e50;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
    }
    
    .fullscreen-btn:hover {
      background-color: #1a252f;
    }
    
    .status-indicator {
      display: inline-block;
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background-color: #28a745;
      margin-right: 8px;
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
    
    .nav-tabs .nav-link {
      color: #2c3e50;
      border: none;
      background: none;
      padding: 12px 24px;
      margin-right: 8px;
      border-radius: 8px 8px 0 0;
      transition: all 0.3s ease;
    }
    
    .nav-tabs .nav-link:hover {
      background: #f8f9fa;
      color: #4ca1af;
    }
    
    .nav-tabs .nav-link.active {
      background: #4ca1af;
      color: white;
      border-color: #4ca1af;
    }
    /* dashboard style closure */
    .header-logo img {
      max-height: 50px;
      width: auto;
      /*filter: brightness(0) invert(1); Makes logo white for dark header */
      margin-bottom: 15px;
      transition: transform 0.3s ease;
    }
    
    .header-logo img:hover {
      transform: scale(1.05);
    }
    /* diagram styles */
    .diagram-container {
      background: white;
      padding: 10px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .diagram-header {
      text-align: center;
      margin-bottom: 10px;
    }
    
    .diagram-title {
      color: #2c3e50;
      font-size: 2.2em;
      margin-bottom: 10px;
      border-bottom: 3px solid #4ca1af;
      padding-bottom: 10px;
      display: inline-block;
    }
    
    .diagram-subtitle {
      color: #666;
      font-size: 1.2em;
      font-style: italic;
    }
    
    #mermaid-diagram {
      min-height: 500px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    .legend {
      margin-top: 20px;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    .legend-item {
      display: flex;
      align-items: center;
      background: #f8f9fa;
      padding: 10px 15px;
      border-radius: 8px;
      border-left: 4px solid;
    }
    
    .legend-user { border-left-color: #0277bd; }
    .legend-guardrail { border-left-color: #f57c00; }
    .legend-ai { border-left-color: #388e3c; }
    .legend-output { border-left-color: #7b1fa2; }
    
    .error-fallback {
      display: none;
      text-align: center;
      padding: 40px;
      background: #fff3cd;
      border: 1px solid #ffeaa7;
      border-radius: 8px;
      color: #856404;
    }
    /* diagram styles end */

    /* File upload styles start */
    .form-group {
      margin-bottom: 15px;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
    }

    
    .file-upload-area {
      border: 2px dashed #4ca1af;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      background: #f8fcff;
      margin-bottom: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .file-upload-area:hover {
      background: #f0f8ff;
      border-color: #357f8a;
    }

    .file-upload-area.drag-over {
      background: #e6f3ff;
      border-color: #2c6e7a;
    }

    .file-info {
      margin-top: 10px;
      padding: 10px;
      background: #e8f5e8;
      border-radius: 6px;
      font-size: 14px;
    }

    .analyze-btn {
      background: #28a745;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: background-color 0.3s ease;
      width: 100%;
    }

    .analyze-btn:hover {
      background: #218838;
    }

    .analyze-btn:disabled {
      background: #6c757d;
      cursor: not-allowed;
    }
    .analysis-result {
      margin-top: 20px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #4ca1af;
    }

    .loading {
      text-align: center;
      padding: 20px;
      color: #666;
    }

    .error {
      background: #f8d7da;
      border-color: #dc3545;
      color: #721c24;
    }

    .success {
      background: #d4edda;
      border-color: #28a745;
      color: #155724;
    }
    /* File upload styles end */

       /* Launch Phases */
        .launch-phases-section {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 40px 0;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section-header h2 {
            font-size: 2em;
            margin-bottom: 8px;
            position: relative;
        }
        
        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: #ffd700;
            border-radius: 2px;
        }
        
        .tagline {
            color: #e2e8f0;
            font-size: 1em;
        }
        
        /* Horizontal Timeline Layout */
        .phases-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        
        .phase-card {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            position: relative;
            min-height: 280px;
        }
        
        .phase-card:hover {
            background: rgba(255,255,255,0.15);
            transform: translateY(-5px);
        }
        
        .phase-number {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            color: #2d3748;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }
        
        .phase-title {
            font-size: 1em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 8px;
            line-height: 1.2;
        }
        
        .phase-status {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: 600;
            margin-bottom: 10px;
            display: inline-block;
        }
        
        .status-completed { background: #48bb78; color: white; }
        .status-active { background: #ed8936; color: white; }
        .status-upcoming { background: #4299e1; color: white; }
        
        .phase-description {
            color: #e2e8f0;
            font-size: 0.8em;
            line-height: 1.4;
            margin-bottom: 10px;
        }
        
        .highlights-list {
            list-style: none;
            padding: 0;
        }
        
        .highlights-list li {
            color: #cbd5e0;
            font-size: 0.75em;
            margin-bottom: 5px;
            padding-left: 12px;
            position: relative;
        }
        
        .highlights-list li::before {
            content: '‚ñ∏';
            color: #ffd700;
            position: absolute;
            left: 0;
            font-weight: bold;
        }
        
        .smart-config {
            text-align: center;
            margin-top: 20px;
            background: rgba(255, 215, 0, 0.1);
            padding: 12px;
            border-radius: 25px;
            border: 1px solid #ffd700;
        }
        
        .smart-config-text {
            color: #ffd700;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        /* Mobile Responsive */
        @media (max-width: 1024px) {
            .phases-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .phase-card {
                min-height: 320px;
            }
        }
        
        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .phases-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .phase-card {
                min-height: auto;
            }
        }
    
  </style>
</head>
<body>
  <header>
    <div style="text-align: left; margin-bottom: 20px;">
      <img src="./Astra_demo_background.png" 
           alt="Astra Logo" 
           style="max-height: 60px; margin-bottom: 10px;">
    </div>
    <h1>AI Guardrail Accelerator </h1>
    <p class="subtitle">Feather light guardrail solutions at your door steps</p>
    <p>
      AI Guardrails help ensure that AI systems behave safely, responsibly, and in alignment with 
      business and ethical standards. This prototype demonstrates real-time input/output scanning 
      to detect risks such as sensitive data leaks, filters, or harmful content.
    </p>
  </header>

  <main>
    <h1>Why AI Guardrails Matter</h1>
    <p class="subtitle">Understanding the Critical Importance of AI Safety and Compliance</p>
    <p>
      As AI adoption accelerates across industries, ensuring trust, compliance, and responsible AI use becomes critical. 
      Guardrails act as safety nets, reducing risks of misinformation, sensitive data exposure, 
      reputational harm, and regulatory non-compliance.
    </p>

    <section>
      <h2>The Stakes Are Higher Than Ever</h2>
      <div class="grid">
        <div class="card">
          <h3>73% of Executives</h3>
          <p>cite AI risk management as their top priority for 2025, according to recent enterprise surveys.</p>
          <div class="actions">Source: Enterprise AI Risk Management Survey 2024</div>
        </div>
        <div class="card">
          <h3>$6.2M Average Cost</h3>
          <p>of AI-related data breaches, significantly higher than traditional data security incidents.</p>
          <div class="actions">Source: IBM Cost of Data Breach Report 2024</div>
        </div>
        <div class="card">
          <h3>89% of Consumers</h3>
          <p>want AI transparency and expect companies to be accountable for AI-driven decisions.</p>
          <div class="actions">Source: Consumer Trust in AI Report 2024</div>
        </div>
      </div>
    </section>

    <section>
      <h2>Critical Risks Without Proper Guardrails</h2>
      <div class="grid">
        <div class="card">
          <h3>üõ°Ô∏è Data Privacy Violations</h3>
          <p>Accidental exposure of sensitive customer information through AI model outputs or training data leakage.</p>
        </div>
        <div class="card">
          <h3>‚öñÔ∏è Regulatory Non-Compliance</h3>
          <p>Failure to meet GDPR, HIPAA, SOX, or emerging AI governance requirements leading to hefty fines.</p>
        </div>
        <div class="card">
          <h3>üìà Reputational Damage</h3>
          <p>Public relations disasters from inappropriate AI outputs or inappropriate content generation.</p>
        </div>
        <div class="card">
          <h3>üí∞ Financial Losses</h3>
          <p>Direct costs from regulatory fines, legal settlements, and lost customer trust.</p>
        </div>
        <div class="card">
          <h3>üö® Security Breaches</h3>
          <p>Prompt injection attacks and adversarial inputs compromising system integrity.</p>
        </div>
      </div>
    </section>

    <section>
      <h2>Real-World Industry Impact</h2>
      
      <div class="grid">
        <div class="card">
          <h3>üè• Healthcare</h3>
          <p><strong>Risk Without Guardrails:</strong> patient privacy breaches, leading to compliance issues and compromising patient details. Patient data is inadvertently exposed through AI model outputs.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> PII detection prevents and actions like data masking protects patient privacy, and compliance checks ensure HIPAA adherence. Clinical validation gates ensure safe deployment.
          </div>
        </div>

        <div class="card">
          <h3>üè≠ Manufacturing</h3>
          <p><strong>Risk Without Guardrails:</strong> AI-controlled production line makes dangerous adjustments due to adversarial inputs, causing equipment damage and safety hazards. Proprietary manufacturing data is exposed.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> Input validation detects anomalies, safety constraints prevent dangerous operations, and data governance protects intellectual property while maintaining operational efficiency.
          </div>
        </div>

        <div class="card">
          <h3>üõí E-commerce & Retail</h3>
          <p><strong>Risk Without Guardrails:</strong> AI recommendation engine promotes harmful products, chatbots share competitor pricing, and dynamic pricing algorithms enable price discrimination leading to customer backlash.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> Content filtering prevents harmful recommendations, information barriers protect competitive data, and fairness controls ensure ethical pricing while maximizing customer satisfaction.
          </div>
        </div>

        <div class="card">
          <h3>üìö Education</h3>
          <p><strong>Risk Without Guardrails:</strong> AI tutoring system provides incorrect information, assessment tools shares sensitive data, and student privacy data is misused for commercial purposes.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> privacy controls protect student data in compliance with FERPA and COPPA regulations.
          </div>
        </div>

        <div class="card">
          <h3>üöó Automotive</h3>
          <p><strong>Risk Without Guardrails:</strong> Autonomous vehicle AI makes unsafe decisions in edge cases, predictive maintenance systems provide false alerts causing unnecessary costs, and vehicle data is compromised.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> Safety validation prevents dangerous maneuvers, uncertainty quantification improves maintenance predictions, and secure data handling protects driver privacy and vehicle security.
          </div>
        </div>

        <div class="card">
          <h3>‚öñÔ∏è Legal Services</h3>
          <p><strong>Risk Without Guardrails:</strong> AI legal research tools cite non-existent cases ("hallucinations"), contract analysis misses critical clauses, and confidential client information is exposed through model outputs.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> Citation verification prevents false legal precedents, accuracy thresholds ensure reliable analysis, and attorney-client privilege protection maintains confidentiality and professional standards.
          </div>
        </div>

        <div class="card">
          <h3>üì∫ Media & Entertainment</h3>
          <p><strong>Risk Without Guardrails:</strong> AI content generation creates deepfakes for misinformation, recommendation algorithms promote extremist content, and copyrighted material is inappropriately used in generated content.</p>
          <div class="note">
            <strong>‚úÖ With AI Guardrails:</strong> Authenticity verification prevents deepfake abuse, content moderation filters harmful material, and copyright protection ensures legal compliance while fostering creative innovation.
          </div>
        </div>
      </div>
    </section>

    <section>
      <h2>The Business Case for AI Guardrails</h2>
      <div class="grid">
        <div class="card">
          <h3>üîí Trust & Compliance</h3>
          <p>Build customer confidence and meet regulatory requirements from day one, avoiding costly retrofitting and compliance gaps.</p>
        </div>
        <div class="card">
          <h3>‚ö° Faster Deployment</h3>
          <p>Accelerate AI project timelines with built-in safety measures that prevent delays from risk assessments and security reviews.</p>
        </div>
        <div class="card">
          <h3>üí° Innovation Enablement</h3>
          <p>Enable bold AI initiatives by providing the safety foundation that allows teams to innovate with confidence.</p>
        </div>
        <div class="card">
          <h3>üìä Measurable ROI</h3>
          <p>Demonstrate clear return on investment through reduced incidents, faster compliance, and increased customer trust metrics.</p>
        </div>
      </div>
    </section>

    <h1>Supported Guardrail Types & Capabilities</h1>

    <!-- OLD VIEW DETAILS section>
      <h2>Types of Guardrails</h2>
      <div class="grid">
        <div class="card"><h3>PII & Sensitive Info</h3><p>Detects personal or confidential data such as SSNs, emails, or financial info.</p></div>
        <div class="card"><h3>Ban Codes/Strings</h3><p>Blocks restricted words, codes, or phrases from being processed.</p></div>
        <div class="card"><h3>Gibberish</h3><p>Prevents meaningless or non-constructive input that could pollute results.</p></div>
        <div class="card"><h3>Invisible Text</h3><p>Identifies hidden characters or obfuscated input that may be malicious.</p></div>
        <div class="card"><h3>Language Detection</h3><p>Ensures input is in allowed languages for compliance and relevance.</p></div>
        <div class="card"><h3>Prompt Injection</h3><p>Stops adversarial prompts trying to bypass AI rules.</p></div>
        <div class="card"><h3>Regex & Custom Rules</h3><p>Flexible pattern matching to block business-specific sensitive data.</p></div>
        <div class="card"><h3>Secrets/Keys</h3><p>Detects accidental leakage of API keys, tokens, or credentials.</p></div>
        <div class="card"><h3>Inappropriate Sentiment</h3><p>Flags hostile, offensive, or aggressive tone.</p></div>
        <div class="card"><h3>Toxicity & Harm</h3><p>Detects hate speech, violence, or harmful content.</p></div>
        <div class="card"><h3>Bias & Fairness</h3><p>Checks for biased language or discriminatory output.</p></div>
      </div>
  </section-->

    <div class="note">
        <strong>Note:</strong> This list reflects the actual capabilities available as of Aug 2025. Each guardrail can be configured with different strength levels and actions (NONE, BLOCK, MASK).
    </div>
  
    <section>
        <h2>Content Filters - Harmful Categories</h2>
        <div class="grid">
            <div class="card">
                <h3><span class="icon hate"></span>Hate Speech Filter <span class="badge content-filter">Content Policy</span></h3>
                <p>Detects and filters hate speech, discrimination, and prejudiced language targeting individuals or groups.</p>
                <div class="actions">Actions: NONE | BLOCK</div>
                <div class="strength-indicator">Configurable Strength: LOW | MEDIUM | HIGH</div>
            </div>
            
            <div class="card">
                <h3><span class="icon violence"></span>Violence Filter <span class="badge content-filter">Content Policy</span></h3>
                <p>Identifies violent content, threats, or descriptions of harmful physical actions.</p>
                <div class="actions">Actions: NONE | BLOCK</div>
                <div class="strength-indicator">Configurable Strength: LOW | MEDIUM | HIGH</div>
            </div>
            
            <div class="card">
                <h3><span class="icon sexual"></span>Sexual Content Filter <span class="badge content-filter">Content Policy</span></h3>
                <p>Blocks inappropriate sexual content, explicit material, or adult themes.</p>
                <div class="actions">Actions: NONE | BLOCK</div>
                <div class="strength-indicator">Configurable Strength: LOW | MEDIUM | HIGH</div>
            </div>
            
            <div class="card">
                <h3><span class="icon misconduct"></span>Misconduct Filter <span class="badge content-filter">Content Policy</span></h3>
                <p>Prevents content that promotes illegal activities, fraud, or unethical behavior.</p>
                <div class="actions">Actions: NONE | BLOCK</div>
                <div class="strength-indicator">Configurable Strength: LOW | MEDIUM | HIGH</div>
            </div>
            
            <div class="card">
                <h3><span class="icon violence"></span>Insults Filter <span class="badge content-filter">Content Policy</span></h3>
                <p>Detects personal attacks, insults, and offensive language directed at individuals.</p>
                <div class="actions">Actions: NONE | BLOCK</div>
                <div class="strength-indicator">Configurable Strength: LOW | MEDIUM | HIGH</div>
            </div>
        </div>
    </section>
  
    <section>
        <h2>PII & Sensitive Information Protection</h2>
        <div class="grid">
            <div class="card">
                <h3><span class="icon pii"></span>PII Detection (31 Types) <span class="badge pii">Sensitive Info</span></h3>
                <p>Comprehensive detection of personally identifiable information including names, emails, phone numbers, SSNs, addresses, credit cards, and more.</p>
                <div class="actions">Actions: BLOCK | MASK | DETECT (no action)</div>
                <div class="strength-indicator">Supports all major PII categories with individual configuration</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Custom Regex Patterns <span class="badge custom">Custom Rules</span></h3>
                <p>Define custom regular expressions to detect business-specific sensitive data patterns.</p>
                <div class="actions">Actions: BLOCK | MASK | DETECT</div>
                <div class="strength-indicator">Fully customizable pattern matching</div>
            </div>
        </div>
    </section>
  
    <section>
        <h2>Word & Topic Filtering</h2>
        <div class="grid">
            <div class="card">
                <h3><span class="icon custom"></span>Profanity Filter <span class="badge custom">Word Filters</span></h3>
                <p>Built-in profanity detection with support for custom word and phrase lists.</p>
                <div class="actions">Actions: BLOCK | MASK</div>
                <div class="strength-indicator">Customizable with your own word lists</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Denied Topics <span class="badge custom">Topic Control</span></h3>
                <p>Block specific topics or subject areas from being discussed or generated.</p>
                <div class="actions">Actions: BLOCK</div>
                <div class="strength-indicator">Topic-level filtering with configurable tiers</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Custom Word Filters <span class="badge custom">Word Lists</span></h3>
                <p>Add your own custom words, phrases, or terms to be filtered or blocked.</p>
                <div class="actions">Actions: BLOCK | MASK</div>
                <div class="strength-indicator">Fully customizable vocabulary control</div>
            </div>
        </div>
    </section>
  
    <section>
        <h2>Advanced Protection</h2>
        <div class="grid">
            <div class="card">
                <h3><span class="icon prompt"></span>Prompt Attack Protection <span class="badge prompt">Prompt Safety</span></h3>
                <p>Detects and blocks prompt injection attacks, jailbreaking attempts, and adversarial inputs designed to bypass AI safety measures.</p>
                <div class="actions">Actions: BLOCK</div>
                <div class="strength-indicator">Advanced prompt attack detection</div>
            </div>
            
            <div class="card">
                <h3><span class="icon contextual"></span>Contextual Grounding Checks <span class="badge contextual">Contextual</span></h3>
                <p>Ensures responses are grounded in provided context and checks for relevance to the input query.</p>
                <div class="actions">Grounding & Relevance Validation</div>
                <div class="strength-indicator">Context adherence and relevance scoring</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Automated Reasoning Check <span class="badge contextual">AI Reasoning</span></h3>
                <p>Validates the logical reasoning and consistency of AI-generated responses.</p>
                <div class="actions">Reasoning validation and consistency checks</div>
                <div class="strength-indicator">Automated logical validation</div>
            </div>
        </div>
    </section>
  
    <section>
        <h2>Configuration Options</h2>
        <div class="grid">
            <div class="card">
                <h3><span class="icon custom"></span>Content Filter Tiers <span class="badge custom">Configuration</span></h3>
                <p>Configurable sensitivity levels for all content filters with LOW, MEDIUM, and HIGH strength settings.</p>
                <div class="actions">Granular control over filter sensitivity</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Blocked Messaging <span class="badge custom">User Experience</span></h3>
                <p>Customize the messages shown to users when content is blocked or filtered.</p>
                <div class="actions">Personalized user-facing messaging</div>
            </div>
            
            <div class="card">
                <h3><span class="icon custom"></span>Separate Input/Output Control <span class="badge custom">Directional</span></h3>
                <p>Configure different guardrail behaviors for user inputs (prompts) versus AI outputs (responses).</p>
                <div class="actions">Independent prompt and response filtering</div>
            </div>
        </div>
    </section>

      <section>
        <h2>How This Demo Works?</h2>
        <p>
          Enter text below, toggle/select options above, and click <b>Check</b>. 
          The system sends your input to a guardrail service based on input/output filter selection, which evaluates it against 
          multiple scanning rules both things going into LLM and response coming out of LLM. Shows the results in real-time. 
          Here is the visual diagram on how this demo works.
        </p>
        <!-- Mermaid diagram Start -->
        <div class="diagram-container">

          <!-- Mermaid Diagram -->
          <div id="mermaid-diagram">
            <div class="mermaid">
              graph TD
                A["üë§ User Input<br/>Business Query to GenAI"] --> B{"üîß Input Filter<br/>Enabled?"}
                
                B -->|"‚úÖ YES"| C["üõ°Ô∏è Input Guardrails<br/>PII Detection<br/>Harmful Filter Blocking"]
                B -->|"‚ùå NO"| D["‚ö° Direct Pass<br/>Faster Processing"]
                
                C --> E["üß† GenAI Model<br/>GPT/Claude/Gemini/etc<br/>Generate Response"]
                D --> E
                
                E --> F{"üîß Output Filter<br/>Enabled?"}
                
                F -->|"‚úÖ YES"| G["üîí Output Guardrails<br/>Quality Check<br/>Brand Protection<br/>Audit Logging"]
                F -->|"‚ùå NO"| H["‚ö° Direct Output<br/>Maximum Speed"]
                
                G --> I["‚ú® Secure Output<br/>Compliant<br/>Business Ready<br/>Risk-Free"]
                H --> I
                
                I --> J["üíº Executive Value<br/>Faster Deployment with Policy Compliance<br/>Risk Mitigation with Uplifting Brand<br/>100% Audit Ready with Dashboards"]
                
                classDef userInput fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
                classDef decision fill:#fce4ec,stroke:#c2185b,stroke-width:2px  
                classDef guardrail fill:#fff3e0,stroke:#f57c00,stroke-width:2px
                classDef aiModel fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
                classDef output fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
                classDef value fill:#e0f2f1,stroke:#00796b,stroke-width:2px
                
                class A userInput
                class B,F decision
                class C,G guardrail
                class D,H,E aiModel
                class I output
                class J value
            </div>
          </div>
          
          <!-- Error Fallback -->
          <div class="error-fallback" id="error-fallback">
            <h3>‚ö†Ô∏è Diagram Loading Issue</h3>
            <p>The interactive diagram couldn't load. Here's the process flow:</p>
            <ol style="text-align: left; display: inline-block; margin-top: 20px;">
              <li><strong>User Input:</strong> Business users submit queries</li>
              <li><strong>Input Guardrails (Optional):</strong> Screen for PII, Harmful filters, and policy violations</li>
              <li><strong>AI Processing:</strong> Generate intelligent responses using GPT/Claude/Gemini/etc</li>
              <li><strong>Output Guardrails (Optional):</strong> Screen for PII, Harmful filters, and policy violations</li>
              <li><strong>Secure Output:</strong> Deliver safe, compliant, business-ready results</li>
            </ol>
          </div>
          
          <!-- Legend -->
          <div class="legend">
            <div class="legend-item legend-user">
              <span><strong>Upload Policy Document(Optional):</strong> Get AI Guardrail Recommendations </span>
            </div>
            <div class="legend-item legend-user">
              <span><strong>User Input:</strong> Entry points & queries</span>
            </div>
            <div class="legend-item legend-guardrail">
              <span><strong>Guardrails:</strong> Security & compliance filters</span>
            </div>
            <div class="legend-item legend-ai">
              <span><strong>AI Processing:</strong> Intelligent LLM response generation</span>
            </div>
            <div class="legend-item legend-output">
              <span><strong>Output:</strong> Safe, compliant results</span>
            </div>
          </div>
        </div>
        <!-- Mermaid diagram end -->

        <!-- <pre id="result">Awaiting input...</pre> -->
      </section>

      <section>
        <h1>Demo Configs for AI Guardrails</h1>
        <p>
          Choose the options below. Depending on your configuration, your input and/or LLM output will be filtered 
          by Guardrail services before or after going to the LLM (OpenAI). 
        </p>
        <label for="apikey">üîë Enter Open API Key </label>
        <input type="password" id="apikey" placeholder="sk-..." style="width:100%; padding:10px;" />
        <label for="model">‚öôÔ∏è Select Open AI GPT Model</label>
        <select id="model">
          <option value="gpt-4o-mini">gpt-4o-mini (fast, cheap)</option>
          <option value="gpt-4o">gpt-4o</option>
          <option value="gpt-3.5-turbo" selected>gpt-3.5-turbo</option>  
        </select>
  
        <div class="config-panel">
          <h3> üîß Configuration</h3>
          <label><input type="checkbox" id="inputFilter"> Enable Input Guardrails</label>
          <label><input type="checkbox" id="outputFilter"> Enable Output Guardrails</label>
        </div>

        <!-- AI Policy Upload Section -->
        <section>
          <div class="config-section">
            <h3>üìÑ AI Policy Analysis</h3>
            <p style="margin-bottom: 15px; color: #666;">Upload your company's AI policy or generic policy document to get personalized AI Guardrail recommendations and integration guidance.</p>
            
            <div class="file-upload-area" id="fileUploadArea">
              <div style="font-size: 48px; margin-bottom: 10px;">üìÑ</div>
              <div style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">Drop your AI policy document here</div>
              <div style="font-size: 14px; color: #666;">or click to browse files</div>
              <div style="font-size: 12px; color: #999; margin-top: 8px;">Supported: PDF, DOC, DOCX, TXT (Max: 10MB)</div>
              <input type="file" id="policyFile" accept=".pdf,.doc,.docx,.txt" style="display: none;">
            </div>
            
            <div id="fileInfo" class="file-info" style="display: none;"></div>
            
            <button id="analyzePolicyBtn" class="analyze-btn" disabled onclick="analyzePolicyDocument()">
              üìä Analyze Policy & Get Recommendations
            </button>
            
            <div id="analysisResult" style="display: none;"></div>
          </div>
        </section>
        <!-- AI Policy Upload Section end-->
        
        <label for="userInput">Enter text to check real time LLM response going via AI Guardrails PII Masking & Harmful contents blocking:</label>
        <textarea id="userInput" placeholder="Type something here that you ask for a ChatGpt... like mentioning person name, date of birth, address"></textarea><br>
  
        <button onclick="checkText()">Check</button>
      </section>

      <section>
        <h3>Results:</h3>
        <!-- Tabbed Results -->
        <ul class="nav nav-tabs" id="resultTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button" role="tab">User View</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="dev-tab" data-bs-toggle="tab" data-bs-target="#developer" type="button" role="tab">Developer View</button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="dash-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab">Dashboard</button>
          </li>
        </ul>
  
        
        <div class="tab-content mt-3">
          <!-- User View -->
          <div class="tab-pane fade show active" id="user" role="tabpanel">
            <div class="mb-3">
              <label class="fw-bold">Original Input:</label>
              <textarea id="originalText" class="form-control" readonly></textarea>
            </div>
            <div class="mb-3">
              <label class="fw-bold">Input Filter Applied:</label> <span id="inputFilterStatus"></span>
              <textarea id="filteredInput" class="form-control" readonly></textarea>
            </div>
            <div class="mb-3">
              <label class="fw-bold">Output Filter Applied:</label> <span id="outputFilterStatus"></span>
              <textarea id="finalOutput" class="form-control" readonly></textarea>
            </div>
          </div>
          
          <!-- Developer View -->
          <div class="tab-pane fade" id="developer" role="tabpanel">
            <label class="fw-bold">Raw JSON Response</label>
            <textarea id="jsonOutput" class="form-control" readonly></textarea>
          </div>
    
        <!-- Results Tab View closure -->
        </div>

          <div class="container-fluid">
            <!-- Tab Navigation >
            <ul class="nav nav-tabs" id="mainTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="dash-tab" data-bs-toggle="tab" data-bs-target="#dashboard" type="button" role="tab">Dashboard</button>
              </li>
          </ul-->
        
            <!-- Tab Content -->
            <div class="tab-content" id="mainTabContent">
        
              <!-- Dashboard Tab with CloudWatch -->
              <div class="tab-pane fade" id="dashboard" role="tabpanel">
                <div class="dashboard-container">
                  <div class="dashboard-header">
                    <h3>
                      <span class="status-indicator"></span>
                      Live CloudWatch Dashboard - Astra AI Guardrail Metrics
                    </h3>
                    <p>Real-time CloudWatch metrics and monitoring</p>
                  </div>
                  
                  <!-- Dashboard Controls -->
                  <div class="dashboard-controls">
                    <button class="refresh-btn" onclick="refreshDashboard()">
                      üîÑ Refresh Dashboard
                    </button>
                    <button class="fullscreen-btn" onclick="openFullscreen()">
                      üîç Open in New Window
                    </button>
                    <span style="float: right; color: #666; font-size: 0.9em;">
                      Last updated: <span id="lastUpdated">Loading...</span>
                    </span>
                  </div>
        
                  <!-- CloudWatch Dashboard Iframe -->
                  <div style="position: relative;">
                    <iframe 
                      id="cloudwatchDashboard"
                      class="dashboard-iframe"
                      src="https://cloudwatch.amazonaws.com/dashboard.html?dashboard=Astra_AI_Guardrail_Dashboard_Demo&context=eyJSIjoidXMtZWFzdC0xIiwiRCI6ImN3LWRiLTMzMDkyNzUzOTc4NyIsIlUiOiJ1cy1lYXN0LTFfNnJndzhOSmQzIiwiQyI6IjNmazJuZXJ2ODAwcW8zaGI3NjA1N2ZpdTRzIiwiSSI6InVzLWVhc3QtMTpjNTNlMjhmMy0xOGU1LTQ0ZjQtYTVjYi0yYmIyN2Y4YWM4ODUiLCJNIjoiUHVibGljIn0="
                      frameborder="0"
                      allowfullscreen
                      title="Astra AI Guardrail CloudWatch Dashboard">
                    </iframe>
                    
                    <!-- Loading overlay -->
                    <div id="loadingOverlay" class="loading-spinner" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(248,249,250,0.9); display: flex; align-items: center; justify-content: center; flex-direction: column;">
                      <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p class="mt-3">Loading CloudWatch Dashboard...</p>
                    </div>
                  </div>
        
                  <!-- Dashboard Info -->
                  <div class="row mt-4">
                    <div class="col-md-6">
                      <div class="card">
                        <div class="card-header bg-primary text-white">
                          üìä Dashboard Features
                        </div>
                        <div class="card-body">
                          <ul class="list-unstyled">
                            <li>‚úÖ Real-time guardrail metrics</li>
                            <li>‚úÖ Request volume monitoring</li>
                            <li>‚úÖ Threat detection analytics</li>
                            <li>‚úÖ Performance insights</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <div class="card">
                        <div class="card-header bg-success text-white">
                          üîß Dashboard Controls
                        </div>
                        <div class="card-body">
                          <ul class="list-unstyled">
                            <li>üîÑ Auto-refresh every 5 minutes</li>
                            <li>üìÖ Customizable time ranges</li>
                            <li>üîç Zoom and pan capabilities</li>
                            <li>üì± Mobile-responsive design</li>
                            <li>üìä Export and sharing options</li>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          <!-- New tab closure -->
          </div>
       <!-- Results section closure -->
      </section>
    <!-- AI prototype with config section closure -->
    </section>
  </main>

      <!-- What's Cooking Next Section -->
    <section style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; margin-top: 50px;">
        <h2 style="color: white; border-bottom: 3px solid #ffd700; text-align: center; font-size: 2.2em; margin-bottom: 30px;">
            What's Cooking Next?
        </h2>
        <p class="subtitle" style="color: #f0f8ff; font-size: 1.2em; text-align: center; margin-bottom: 40px;">
            Innovation Never Sleeps - Exciting Things Coming Soon!
        </p>
        <div class="grid">
            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #4a5568;">ü§ñ AI Policy Intelligence <span class="badge custom" style="background: #ffd700; color: #2d3748;">Smart Config</span></h3>
                <p style="color: #4a5568;">Upload your company AI policy and our intelligent bot will automatically suggest frequently and upon approval, configure the optimal guardrail services needed for compliance.</p>
                <div class="actions" style="color: #718096; font-weight: bold;">üéØ Zero-config compliance setup</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #4a5568;">üìä Accuracy Analytics <span class="badge prompt" style="background: #38b2ac; color: white;">ML Insights</span></h3>
                <p style="color: #4a5568;">Real-time False Positive/Negative Rate measurement and model accuracy insights to fine-tune your guardrail performance.</p>
                <div class="actions" style="color: #718096; font-weight: bold;">üìà Data-driven optimization</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #4a5568;">‚òÅÔ∏è Multi-Cloud Freedom <span class="badge contextual" style="background: #ed64a6; color: white;">Platform Agnostic</span></h3>
                <p style="color: #4a5568;">Expand beyond AWS to Azure, GCP with intelligent CSP recommendations. We handle the complexity, you focus on your AI goals.</p>
                <div class="actions" style="color: #718096; font-weight: bold;">üåê Best-of-breed cloud selection</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #4a5568;">üèõÔ∏è AI Governance Framework <span class="badge custom" style="background: #805ad5; color: white;">Enterprise</span></h3>
                <p style="color: #4a5568;">Complete organizational AI governance accelerator with policy templates, audit trails, and compliance dashboards.</p>
                <div class="actions" style="color: #718096; font-weight: bold;">‚öñÔ∏è Enterprise-grade governance</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #4a5568;">üí∞ Tiered Billing Intelligence for Content Safety as a Service <span class="badge prompt" style="background: #f56565; color: white;">Cost Control</span></h3>
                <p style="color: #4a5568;">Smart Tiered Subscription Plans with predictable costs for easy off budgeting.  <br>
                  
                  <strong>Starter Plan - per month basis</strong> <br>
                  10,000 API calls included |
                  Basic support |
                  Standard rate limiting. <br>
                  
                  <strong>Professional Plan - per month basis</strong> <br>
                  100,000 API calls included |
                  Priority support |
                  Higher rate limits |
                  Advanced analytics. <br>
                  
                  <strong>Enterprise Plan - per month basis</strong> <br>
                  1,000,000 API calls included |
                  Dedicated support |
                  Custom rate limits |
                  White-label options |
                  SLA guarantees.
                </p>
                <div class="actions" style="color: #718096; font-weight: bold;">üí° Transparent cost optimization</div>
            </div>
        </div>
    </section>

    <!-- Omni-Channel Integration Section -->
    <section style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; margin-top: 30px;">
        <h2 style="color: white; border-bottom: 3px solid #ffd700; text-align: center; font-size: 2em; margin-bottom: 30px;">
            üîó Omni-Channel AI Integration
        </h2>
        <p class="subtitle" style="color: #f0f8ff; font-size: 1.1em; text-align: center; margin-bottom: 40px;">
            Seamless Guardrails Across Every AI Touchpoint in Your Organization
        </p>
        
        <div class="grid">
            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üìã SharePoint Integration <span class="badge contextual">Document AI</span></h3>
                <p style="color: #4a5568;">Secure AI interactions with task boards, document analysis, and team collaboration while maintaining policy compliance.</p>
                <div class="actions" style="color: #718096;">‚úÖ Policy-compliant document AI</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üí¨ Microsoft Teams <span class="badge custom">Chat AI</span></h3>
                <p style="color: #4a5568;">AI-powered chat assistance with built-in guardrails for safe, productive team communications and meeting intelligence.</p>
                <div class="actions" style="color: #718096;">üõ°Ô∏è Safe enterprise chat AI</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üé• Meeting Intelligence <span class="badge prompt">Audio AI</span></h3>
                <p style="color: #4a5568;">AI-powered meeting recording, transcription, and summarization with privacy-first guardrails and content filtering.</p>
                <div class="actions" style="color: #718096;">üéØ Compliant meeting AI</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üë®‚Äçüíª Git Copilot Control <span class="badge pii">Code AI</span></h3>
                <p style="color: #4a5568;">Secure code generation and assistance with IP protection, security scanning, and proprietary code safeguarding.</p>
                <div class="actions" style="color: #718096;">üîí IP-protected coding AI</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üö´ Content Creation Control <span class="badge content-filter">Creative AI</span></h3>
                <p style="color: #4a5568;">Policy-enforced blocks on unauthorized image, icon, and video generation to maintain brand consistency and compliance.</p>
                <div class="actions" style="color: #718096;">üé® Brand-compliant creative AI</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üìö Research & IP Protection <span class="badge custom">Academic AI</span></h3>
                <p style="color: #4a5568;">Intelligent assistance for research papers, articles, and patents with IP protection and plagiarism prevention guardrails.</p>
                <div class="actions" style="color: #718096;">üî¨ Research-grade AI safety</div>
            </div>

            <div class="card" style="background: rgba(255,255,255,0.95); border: none; transform: none;">
                <h3 style="color: #2d3748;">üìÑ Document Summarization <span class="badge contextual">Text AI</span></h3>
                <p style="color: #4a5568;">AI-powered document analysis and summarization with sensitive information detection and privacy controls.</p>
                <div class="actions" style="color: #718096;">üìñ Privacy-first document AI</div>
            </div>
        </div>
    </section>

      <!-- Launch Phases Section -->
    <section class="launch-phases-section">
        <div class="container">
            <div class="section-header">
                <h2>üöÄ Launch Phases</h2>
                <p class="tagline">Strategic Roadmap to Market Leadership</p>
            </div>
            
            <div class="phases-grid">
                <!-- Phase 1 -->
                <div class="phase-card">
                    <div class="phase-number">1</div>
                    <div class="phase-title">Pre-Launch Accelerator</div>
                    <div class="phase-status status-completed">‚úÖ Completed</div>
                    <p class="phase-description">Accelerator Foundation with market research and validation</p>
                    <ul class="highlights-list">
                        <li>Market Research & Strategy</li>
                        <li>Prototype & Demo Development</li>
                        <li>Initial Stakeholder Feedback</li>
                        <li>Technical Architecture</li>
                    </ul>
                </div>

                <!-- Phase 2 -->
                <div class="phase-card">
                    <div class="phase-number">2</div>
                    <div class="phase-title">Beta-Launch Onboarding</div>
                    <div class="phase-status status-active">üîÑ Active</div>
                    <p class="phase-description">Customer onboarding and improvements</p>
                    <ul class="highlights-list">
                        <li>Customer Portal MVP</li>
                        <li>Sandbox Integration</li>
                        <li>Beta Testing & Validation</li>
                        <li>User Experience Optimization</li>
                    </ul>
                </div>

                <!-- Phase 3 -->
                <div class="phase-card">
                    <div class="phase-number">3</div>
                    <div class="phase-title">Services-Launch Consulting</div>
                    <div class="phase-status status-upcoming">üìÖ Upcoming</div>
                    <p class="phase-description">Managed consulting guardrail services</p>
                    <ul class="highlights-list">
                        <li>End-to-end Guardrail Management</li>
                        <li>AI Policy Development</li>
                        <li>Guardrail & Governance Strategy Consulting Services</li>
                    </ul>
                </div>

                <!-- Phase 4 -->
                <div class="phase-card">
                    <div class="phase-number">4</div>
                    <div class="phase-title">Domain-Launch Templates</div>
                    <div class="phase-status status-upcoming">üéØ Planned</div>
                    <p class="phase-description">Industry/Domain-Specific Template Guardrails</p>
                    <ul class="highlights-list">
                        <li>Healthcare/Finance/Customer-Centric Templates</li>
                        <li>Enterprise Integration Points based on Domain use cases</li>
                        <li>Domain Dashboards</li>
                        <li>Domain Specific Compliance Safety Rules</li>
                    </ul>
                </div>

                <!-- Phase 5 -->
                <div class="phase-card">
                    <div class="phase-number">5</div>
                    <div class="phase-title">Features-Launch Advanced</div>
                    <div class="phase-status status-upcoming">üöÄ Future</div>
                    <p class="phase-description">Advanced features and monitoring</p>
                    <ul class="highlights-list">
                        <li>AI Policy Analytics</li>
                        <li>Multi-Cloud Platform</li>
                        <li>Proactive Threat Intelligence on emerging safety concerns</li>
                        <li>Cost Predictions for budgeting & Governance</li>
                        <li>AI Governance Framework</li>
                    </ul>
                </div>
            </div>
            
        </div>
    </section>

    <!-- Call to Action -->
    <section style="background: linear-gradient(135deg, #2c3e50, #4ca1af); color: white; text-align: center; margin-top: 30px;">
        <h2 style="color: white; border: none; font-size: 2.5em; margin-bottom: 20px;">
            üéØ Ready to Future-Proof Your AI Adoption?
        </h2>
        <p style="font-size: 1.3em; margin-bottom: 30px; max-width: 800px; margin-left: auto; margin-right: auto;">
            Join our list for early access to these revolutionary features. Be among the first to experience next-generation AI guardrails to safe guard your organization!
        </p>
        <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <button style="background: rgba(255,255,255,0.2); border: 2px solid white; color: white; padding: 15px 30px; font-size: 1.1em; border-radius: 25px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                üìß contact@astranextgen.com
            </button>
            <button style="background: rgba(255,255,255,0.2); border: 2px solid white; color: white; padding: 15px 30px; font-size: 1.1em; border-radius: 25px; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                üí¨ Share your valuable feedback and list out your needs :)
            </button>
        </div>
    </section>
  <!-- Floating Chat Button -->
  <div id="chatButton" onclick="toggleChatPopup()">üí¨</div>
  
  <!-- Chat Popup -->
  <div id="chatPopup">
    <div class="chat-header">
      <span>Astrabot</span>
      <button onclick="toggleChatPopup()">‚úñ</button>
    </div>
    <div class="chat-body" id="chatMessages"></div>
    <div class="chat-input">
      <textarea id="chatInput" placeholder="Type your message to send it to LLM like OpenAI..."></textarea>
      <button onclick="sendChat()">‚û§</button>
    </div>
  </div>

  <footer>
    ¬© 2025 Astra NextGen Technologies, LLC. | www.astranextgen.com | Building Trustworthy AI
  </footer>

  <script>
    // Initialize Mermaid with error handling
    try {
      mermaid.initialize({
        startOnLoad: true,
        theme: 'default',
        securityLevel: 'loose',
        flowchart: {
          useMaxWidth: true,
          htmlLabels: false,
          curve: 'basis'
        }
      });
      
      // Check if diagram rendered successfully
      setTimeout(() => {
        const mermaidSvg = document.querySelector('.mermaid svg');
        if (!mermaidSvg) {
          console.error('Mermaid diagram failed to render');
          document.getElementById('mermaid-diagram').style.display = 'none';
          document.getElementById('error-fallback').style.display = 'block';
        }
      }, 3000);
      
    } catch (error) {
      console.error('Mermaid initialization failed:', error);
      document.getElementById('mermaid-diagram').style.display = 'none';
      document.getElementById('error-fallback').style.display = 'block';
    }
  </script>
<script>
  const endpoints = {
    aws: "https://9r2j9zq0yd.execute-api.us-east-2.amazonaws.com/prod/aiGuardrailPrototype",
    openai: "https://api.openai.com/v1/chat/completions"
  };

  async function checkText() {

    const inputText = document.getElementById('userInput').value;
    const resultTabOrgDiv = document.getElementById('originalText');
    const resultTabFilterDiv = document.getElementById('filteredInput');
    const resultTabFinalDiv = document.getElementById('finalOutput');
    const resultTabJsonDiv = document.getElementById('jsonOutput');
    const key = document.getElementById("apikey").value;
    const model = document.getElementById("model").value;

    // Clear ALL previous results before starting. At present not working as expected.
    // resultTabOrgDiv.value = "";
    // resultTabFilterDiv.value = "";
    // resultTabFinalDiv.value = "";
    // resultTabJsonDiv.value = "";

    resultTabOrgDiv.textContent = "Processing...";
    if (!key) {
      resultTabOrgDiv.textContent = "Please enter the Open AI LLM API Key (password) above key box and retry";
      return;
    }

    if (!inputText) return;

    let processedInput = inputText;

    const useInputFilter = document.getElementById("inputFilter").checked;
    const useOutputFilter = document.getElementById("outputFilter").checked;

    try {
      // Step 1: Apply input guardrails
      let inputData = {};
      if (useInputFilter) {
        resultTabOrgDiv.textContent = "Applying Input Guardrails...";
        const payload = {
          text: processedInput,
          filter_type: "INPUT"
        };
        const resp = await fetch(endpoints.aws, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        if (!resp.ok) {
          throw new Error(`HTTP error! Status: ${resp.status}`);
        }
        inputData = await resp.json();
        processedInput = inputData.guardrail_filtered_text || processedInput;
      }

      // Step 2: Call OpenAI
      let llmResponse = "No response from LLM.";
      resultTabOrgDiv.textContent = "Sending info to Generative AI LLM...";

      const respLLM = await fetch(endpoints.openai, {
        method: "POST",
        headers: { 
          "Content-Type": "application/json",
          "Authorization": `Bearer ${key}`
        },
        body: JSON.stringify({
          model,
          messages: [{ role: "user", content: processedInput }],
          temperature: 0.5,
          max_tokens: 512
        })
      });

      if (!respLLM.ok) {
        throw new Error(`OpenAI error! Status: ${respLLM.status}`);
      }

      const dataLLM = await respLLM.json();
      llmResponse = dataLLM.choices?.[0]?.message?.content || llmResponse;

      // Step 3: Apply output guardrails
      let outputData = {};
      if (useOutputFilter) {
        resultTabOrgDiv.textContent = "Applying Output Guardrails...";
        const payload = {
          text: llmResponse,
          filter_type: "OUTPUT"
        };
        const resp = await fetch(endpoints.aws, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        if (!resp.ok) {
          throw new Error(`HTTP error! Status: ${resp.status}`);
        }
        outputData = await resp.json();
        llmResponse = outputData.guardrail_filtered_text || llmResponse;
      }

      // --- User View ---
      document.getElementById("originalText").value = inputText;
      document.getElementById("inputFilterStatus").innerText = useInputFilter ? "Yes Input Filter Applied" : "No Input Filter NOT Applied";
      document.getElementById("filteredInput").value = processedInput ? processedInput : "N/A";
      document.getElementById("outputFilterStatus").innerText = useOutputFilter ? "Yes Ouput Filter Applied" : "No Output Filter NOT Applied";
      document.getElementById("finalOutput").value = llmResponse;

      // --- Developer View ---
      const mergedData = { inputData, outputData };
      document.getElementById("jsonOutput").value = JSON.stringify(mergedData, null, 2);


    // checkText function try block
    } catch (error) {
      console.error("Error calling API via UI:", error);
      resultTabOrgDiv.textContent = "‚ùå Error: " + error.message;
    }
  // checkText function closure
  }
</script>

<script>
  
  function toggleChatPopup() {
    const popup = document.getElementById("chatPopup");
    popup.style.display = popup.style.display === "flex" ? "none" : "flex";
  }

  async function sendChat() {
    const inputField = document.getElementById("chatInput");
    const message = inputField.value.trim();
    const useInputFilter = document.getElementById("inputFilter").checked;
    const useOutputFilter = document.getElementById("outputFilter").checked;
    if (!message) return;

    // Show user message
    appendMessage(message, "user-message");
    inputField.value = "";

    const key = document.getElementById("apikey").value;
    const model = document.getElementById("model").value;
    if (!key) {
      appendMessage("Please enter the Open AI LLM API Key (password) and retry", "bot-message");
      return;
    }

    // Step 1: Input Guardrail
    let blocked = false;
    let guardrailReason = "";

    if (useInputFilter) {
      appendMessage("Analyzing with input Guardrail...", "bot-message");
      try {
        const payload = {
          text: message,
          filter_type: "INPUT",   // can also be "OUTPUT"
        };
        const response = await fetch(endpoints.aws, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });
        if (!response.ok) {
          throw new Error(`HTTP error from input guardrail in chat client! Status: ${response.status}`);
        }
        const data = await response.json();
  
        if (data.pii.detected) {
          blocked = true;
          guardrailReason = data.guardrail_filtered_text || "Sensitive information detected.";
        }
      } catch (err) {
        console.error("Guardrail check failed:", err);
      }
      if (blocked) {
        appendMessage("‚ö†Ô∏è " + guardrailReason + " Please re-enter without sensitive info which shows as redacted.", "bot-message");
        return;
      }
    } // useInputFilter condition closing



    // Step 2: Call OpenAI
    appendMessage("Sending user input to LLM...", "bot-message");
    
    let llmText = "Default no response";
    try {
      const llmResponse = await fetch(endpoints.openai, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": `Bearer ${key}`
        },
        body: JSON.stringify({
          model: model,
          messages: [{ role: "user", content: message }]
        })
      });
      const llmData = await llmResponse.json();

      llmText = llmData?.choices?.[0]?.message?.content || "No response";
    } catch (error) {
      appendMessage("‚ùå Error calling LLM.", "bot-message" + error);
    }

    // Step 3: Output Guardrail
    let finalText = llmText;
    if (useOutputFilter) {
      try {
        appendMessage("Updating LLM response if needed with output Guardrail before showing to the user...", "bot-message");

        const payload = {
          text: llmText,
          filter_type: "OUTPUT",   // can also be "OUTPUT"
          checkOutput: true
        };
        const outResponse = await fetch(endpoints.aws, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        const outData = await outResponse.json();
        if (outData?.guardrail_filtered_text) {
          finalText = outData.guardrail_filtered_text;
        }
      } catch (err) {
        console.error("Output guardrail failed in chat client:", err);
      }
    }

    appendMessage(finalText, "bot-message");
    // Replace "Processing or progress status..." with real response
    // const chatBody = document.getElementById("chatMessages");
    // chatBody.lastChild.textContent = finalText;
  } // sendChat function closure

  function appendMessage(text, className) {
    const chatBody = document.getElementById("chatMessages");
    const msg = document.createElement("div");
    msg.className = "message " + className;
    msg.textContent = text;
    chatBody.appendChild(msg);
    chatBody.scrollTop = chatBody.scrollHeight;
  }
</script>

  <script>
    // Update timestamp and dash board script
    function updateTimestamp() {
      document.getElementById('lastUpdated').textContent = new Date().toLocaleString();
    }

    // Refresh dashboard
    function refreshDashboard() {
      const iframe = document.getElementById('cloudwatchDashboard');
      const overlay = document.getElementById('loadingOverlay');
      
      // Show loading overlay
      overlay.style.display = 'flex';
      
      // Refresh iframe
      iframe.src = iframe.src;
      
      // Hide overlay after a delay
      setTimeout(() => {
        overlay.style.display = 'none';
        updateTimestamp();
      }, 2000);
    }

    // Open dashboard in new window
    function openFullscreen() {
      const dashboardUrl = "https://cloudwatch.amazonaws.com/dashboard.html?dashboard=Astra_AI_Guardrail_Dashboard_Demo&context=eyJSIjoidXMtZWFzdC0xIiwiRCI6ImN3LWRiLTMzMDkyNzUzOTc4NyIsIlUiOiJ1cy1lYXN0LTFfNnJndzhOSmQzIiwiQyI6IjNmazJuZXJ2ODAwcW8zaGI3NjA1N2ZpdTRzIiwiSSI6InVzLWVhc3QtMTpjNTNlMjhmMy0xOGU1LTQ0ZjQtYTVjYi0yYmIyN2Y4YWM4ODUiLCJNIjoiUHVibGljIn0=";
      window.open(dashboardUrl, '_blank', 'width=1200,height=800');
    }

    // Handle iframe load
    document.getElementById('cloudwatchDashboard').onload = function() {
      document.getElementById('loadingOverlay').style.display = 'none';
      updateTimestamp();
    };

    // Auto-refresh every 5 minutes
    setInterval(refreshDashboard, 5 * 60 * 1000);

    // Initial timestamp
    updateTimestamp();

    // Handle tab switching
    document.addEventListener('DOMContentLoaded', function() {
      const dashTab = document.getElementById('dash-tab');
      dashTab.addEventListener('shown.bs.tab', function() {
        // Optional: Refresh dashboard when tab is shown
        updateTimestamp();
      });
    });
  </script>

  <script>
    // AI plociy upload script

    let uploadedPolicyContent = '';
    
    // File upload functionality
    function initializeFileUpload() {
      const fileUploadArea = document.getElementById('fileUploadArea');
      const fileInput = document.getElementById('policyFile');
      const fileInfo = document.getElementById('fileInfo');
      const analyzeBtn = document.getElementById('analyzePolicyBtn');

      // Click to upload
      fileUploadArea.addEventListener('click', () => fileInput.click());

      // Drag and drop
      fileUploadArea.addEventListener('dragover', (e) => {
        e.preventDefault();
        fileUploadArea.classList.add('drag-over');
      });

      fileUploadArea.addEventListener('dragleave', () => {
        fileUploadArea.classList.remove('drag-over');
      });

      fileUploadArea.addEventListener('drop', (e) => {
        e.preventDefault();
        fileUploadArea.classList.remove('drag-over');
        const files = e.dataTransfer.files;
        if (files.length > 0) {
          handleFileSelection(files[0]);
        }
      });

      // File input change
      fileInput.addEventListener('change', (e) => {
        if (e.target.files.length > 0) {
          handleFileSelection(e.target.files[0]);
        }
      });
    }

    function handleFileSelection(file) {
      const fileInfo = document.getElementById('fileInfo');
      const analyzeBtn = document.getElementById('analyzePolicyBtn');

      // Validate file
      if (file.size > 2 * 1024 * 1024) {
        showError('File size must be less than 2MB');
        return;
      }

      const allowedTypes = ['text/plain', 'application/pdf', 'application/msword', 
                          'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
      
      if (!allowedTypes.includes(file.type) && !file.name.match(/\.(txt|pdf|doc|docx)$/i)) {
        showError('Please select a valid document file (PDF, DOC, DOCX, or TXT)');
        return;
      }

      // Display file info
      fileInfo.style.display = 'block';
      fileInfo.innerHTML = `
        <strong>üìé Selected File:</strong> ${file.name}<br>
        <strong>üìè Size:</strong> ${(file.size / 1024).toFixed(1)} KB<br>
        <strong>üìÖ Last Modified:</strong> ${new Date(file.lastModified).toLocaleString()}
      `;

      // Read file content
      const reader = new FileReader();
      reader.onload = function(e) {
        uploadedPolicyContent = e.target.result;
        analyzeBtn.disabled = false;
        analyzeBtn.textContent = 'üìä Analyze Policy & Get Recommendations';
      };

      reader.onerror = function() {
        showError('Error reading file. Please try again.');
      };

      // Read as text for now (you might want to add PDF parsing libraries for production)
      reader.readAsText(file);
    }

    async function analyzePolicyDocument() {
      if (!uploadedPolicyContent) {
        showError('Please upload a policy document first');
        return;
      }

      const key = document.getElementById("apikey").value;
      const model = document.getElementById("model").value;
      
      if (!key) {
        showError("Please enter your OpenAI API Key first");
        return;
      }

      const analyzeBtn = document.getElementById('analyzePolicyBtn');
      const resultDiv = document.getElementById('analysisResult');

      // Show loading state
      analyzeBtn.disabled = true;
      analyzeBtn.textContent = 'üîÑ Analyzing...';
      resultDiv.style.display = 'block';
      resultDiv.className = 'analysis-result loading';
      resultDiv.innerHTML = `
        <div class="loading">
          <div style="font-size: 24px; margin-bottom: 10px;">‚è≥</div>
          <div>Analyzing your AI policy document...</div>
          <div style="font-size: 12px; color: #999; margin-top: 5px;">This may take 30-60 seconds</div>
        </div>
      `;

      try {
        // Truncate policy content if too long to avoid token limits
        const maxPolicyLength = 8000; // Reserve tokens for prompt and response
        let policyContent = uploadedPolicyContent;
        if (policyContent.length > maxPolicyLength) {
          policyContent = policyContent.substring(0, maxPolicyLength) + "\n\n[Content truncated due to length...]";
        }

        // Create the prompt for policy analysis
        const prompt = `As an AI governance expert, please analyze the following company AI policy document and provide:

                        1. **AI Guardrail Recommendations**: Which specific AWS Bedrock guardrail services should be enabled based on the policy requirements (Content Filtering, PII Detection, Topic Filtering, Word Filtering, Sensitive Information Filtering, etc.)
                        
                        2. **Configuration Suggestions**: Specific configuration recommendations for each recommended guardrail service
                        
                        3. **Integration Points**: Where in the company's systems/workflow these guardrails should be integrated based on the policy requirements
                        
                        4. **Risk Assessment**: Key AI risks identified in the policy and how the recommended guardrails address them
                        
                        5. **Compliance Alignment**: How the recommended setup ensures compliance with the stated policy
                        
                        Please format your response in clear sections with specific, actionable recommendations. Actionable recommendations should specific to contact AI experts from Astra NextGen Technologies with email contact@astranextgen.com
                        Do not specify AWS bedrock or AWS or any cloud service providers in your reponse to keep it platform agnostic solution. 
                        As part of next steps, clearly specify to consult Astra AI solutions architect for implementation.
                        
                        **Company AI Policy Document:**
                        ${policyContent}`;

        // Validate API key format
        if (!key.startsWith('sk-')) {
          throw new Error('Invalid API key format. OpenAI API keys should start with "sk-"');
        }

        // Call OpenAI API with better error handling
        const requestBody = {
          model: model,
          messages: [{ role: "user", content: prompt }],
          max_tokens: 3000,
          temperature: 0.3
        };

        console.log('Sending request to OpenAI:', { model, promptLength: prompt.length });

        const response = await fetch(endpoints.openai, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${key}`
          },
          body: JSON.stringify(requestBody)
        });

        if (!response.ok) {
          const errorText = await response.text();
          console.error('OpenAI API Error:', response.status, errorText);
          
          let errorMessage;
          try {
            const errorData = JSON.parse(errorText);
            errorMessage = errorData.error?.message || `API Error ${response.status}`;
          } catch (e) {
            errorMessage = `API Error ${response.status}: ${errorText}`;
          }
          
          throw new Error(errorMessage);
        }

        const data = await response.json();
        const analysis = data?.choices?.[0]?.message?.content || "No analysis generated";

        // Display results
        displayAnalysisResults(analysis);

      } catch (error) {
        console.error('Policy analysis failed:', error);
        
        let errorMessage = error.message;
        let troubleshootingTips = '';
        
        if (error.message.includes('Invalid API key')) {
          troubleshootingTips = '<p><strong>üí° Tips:</strong> Make sure your API key starts with "sk-" and is correctly copied from OpenAI.</p>';
        } else if (error.message.includes('insufficient_quota') || error.message.includes('quota')) {
          troubleshootingTips = '<p><strong>üí° Tips:</strong> Your OpenAI account may have insufficient credits. Please check your OpenAI billing.</p>';
        } else if (error.message.includes('rate_limit')) {
          troubleshootingTips = '<p><strong>üí° Tips:</strong> Rate limit exceeded. Please wait a moment and try again.</p>';
        } else if (error.message.includes('model_not_found')) {
          troubleshootingTips = '<p><strong>üí° Tips:</strong> The selected model may not be available. Try switching to GPT-3.5 Turbo.</p>';
        }
        
        resultDiv.className = 'analysis-result error';
        resultDiv.innerHTML = `
          <h4>‚ùå Analysis Failed</h4>
          <p><strong>Error:</strong> ${errorMessage}</p>
          ${troubleshootingTips}
          <details style="margin-top: 10px;">
            <summary style="cursor: pointer; color: #666;">üîç Technical Details</summary>
            <pre style="background: #f8f9fa; padding: 10px; border-radius: 4px; font-size: 12px; margin-top: 8px; overflow-x: auto;">${JSON.stringify({
              model: model,
              promptLength: prompt?.length || 0,
              policyLength: uploadedPolicyContent?.length || 0,
              timestamp: new Date().toISOString()
            }, null, 2)}</pre>
          </details>
        `;
      } finally {
        analyzeBtn.disabled = false;
        analyzeBtn.textContent = 'üìä Analyze Policy & Get Recommendations';
      }
    }

    function displayAnalysisResults(analysis) {
      const resultDiv = document.getElementById('analysisResult');
      
      // Format the analysis text with better styling
      const formattedAnalysis = analysis
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\*(.*?)\*/g, '<em>$1</em>')
        .replace(/\n\n/g, '</p><p>')
        .replace(/\n/g, '<br>');

      resultDiv.className = 'analysis-result success';
      resultDiv.innerHTML = `
        <h4>‚úÖ AI Policy Analysis Complete</h4>
        <div style="margin-top: 15px; line-height: 1.6;">
          <p>${formattedAnalysis}</p>
        </div>
        <div style="margin-top: 20px; padding: 15px; background: #e9ecef; border-radius: 6px; font-size: 14px;">
          <strong>üí° Next Steps:</strong>
          <ul style="margin-top: 8px; margin-bottom: 0;">
            <li>Review the recommended guardrail configurations</li>
            <li>Consult with Astra solutions architect for implementation</li>
            <li>Test the guardrails in a development/staging environment first</li>
            <li>Monitor, adjust configurations and scale the solution based on your specific use cases</li>
          </ul>
        </div>
      `;
    }

    function showError(message) {
      const resultDiv = document.getElementById('analysisResult');
      resultDiv.style.display = 'block';
      resultDiv.className = 'analysis-result error';
      resultDiv.innerHTML = `<h4>‚ùå Error</h4><p>${message}</p>`;
      
      setTimeout(() => {
        resultDiv.style.display = 'none';
      }, 5000);
    }


    // Initialize file upload when page loads
    document.addEventListener('DOMContentLoaded', initializeFileUpload);

    // Allow Enter key in textarea for chat
    document.addEventListener('DOMContentLoaded', function() {
      const chatInput = document.getElementById('chatInput');
      chatInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          sendChat();
        }
      });
    });
  </script>

</body>
</html>
